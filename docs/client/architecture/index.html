<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Client Architecture In general we rely on the features of the Godot engine and its network stack. Incoming server messages are transferred to the bestia module which transforms them into usable messages which are then either emitted into the GD scripting part of the engine or internally routed to the entity manager which keeps track of entities and their components. How certain effects are setup is not subject for this documentation.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="Client Architecture In general we rely on the features of the Godot engine and its network stack. Incoming server messages are transferred to the bestia module which transforms them into usable messages which are then either emitted into the GD scripting part of the engine or internally routed to the entity manager which keeps track of entities and their components. How certain effects are setup is not subject for this documentation." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://docs.bestia-game.net/docs/client/architecture/" />
<meta property="article:modified_time" content="2020-06-07T17:06:54+02:00" />
<title>Architecture | Bestia Game</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.8faf8c6f51f7bb1ff07807bc087f607f8071c4b0ce8b6737ad62995aa1337d4f.css" integrity="sha256-j6&#43;Mb1H3ux/weAe8CH9gf4BxxLDOi2c3rWKZWqEzfU8=">
<script defer src="/en.search.min.cb6d36c71c735988bba2f07c9b25e4a1b2620b080908375e72add139c6b5216d.js" integrity="sha256-y202xxxzWYi7ovB8myXkobJiCwgJCDdecq3ROca1IW0="></script>

<script defer src="/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js" integrity="sha256-dKi7B/C&#43;6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/bestia-logo.svg" alt="Logo" /><span>Bestia Game</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li>
  <a href="/docs/mechanics/"><strong>Game Design</strong></a>
<ul>
<li>
  <a href="/docs/mechanics/master/">Bestia Master</a></li>
<li>
  <a href="/docs/mechanics/bestia/">Bestias</a></li>
<li>
  <a href="/docs/mechanics/environment/">Environment</a></li>
<li>
  <a href="/docs/mechanics/items/">Items</a></li>
<li>
  <a href="/docs/mechanics/resources/">Resources</a></li>
<li>
  <a href="/docs/mechanics/skills/">Skills</a></li>
<li>
  <a href="/docs/mechanics/statusvalues/">Status Values</a></li>
</ul>
</li>
<li>
  <a href="/docs/client/"><strong>Client</strong></a>
<ul>
<li>
  <a href="/docs/client/architecture/"class=active>Architecture</a></li>
</ul>
</li>
<li>
  <a href="/docs/server/"><strong>Server</strong></a>
<ul>
<li>
  <a href="/docs/server/architecture/">Architecture</a></li>
<li>
  <a href="/docs/server/ai/">Artificial Intelligence</a></li>
<li>
  <a href="/docs/server/battle/">Battle</a></li>
<li>
  <a href="/docs/server/quests/">Quests</a></li>
<li>
  <a href="/docs/server/scripting/">Scripting</a></li>
<li>
  <a href="/docs/server/world-generation/">World Generation</a></li>
</ul>
</li>
<li>
  <a href="/docs/api/"><strong>REST API</strong></a></li>
<li>
  <a href="/docs/resources/"><strong>Development Resources</strong></a></li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Architecture</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#client-architecture">Client Architecture</a>
      <ul>
        <li><a href="#entitymanager">EntityManager</a></li>
        <li><a href="#entitynode">EntityNode</a></li>
        <li><a href="#componentsetter">ComponentSetter</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="client-architecture">Client Architecture</h1>
<p>In general we rely on the features of the Godot engine and its network stack. Incoming server messages are transferred to the bestia module which transforms them into usable messages which are then either emitted into the GD scripting part of the engine or internally routed to the entity manager which keeps track of entities and their components.
How certain effects are setup is not subject for this documentation. This is just an overview on how the server is communicating with the client and how this information is used to visualize the game content to the user.</p>
<p>Network IO -&gt; Mod: Bytes -&gt; ProtoMsg is directed to the EntityManager, figures out the target entity.</p>
<h2 id="entitymanager">EntityManager</h2>
<ul>
<li>Reserves local IDs</li>
<li>Keeps track of entities and their components</li>
<li>Updates components and signal changes</li>
<li>If Entity is deleted it gets informed and removes it</li>
</ul>
<h2 id="entitynode">EntityNode</h2>
<ul>
<li>Signals change in components</li>
<li>Informs the EntityManager about creation and deletion</li>
</ul>
<h2 id="componentsetter">ComponentSetter</h2>
<ul>
<li>Sets component values via the editor</li>
<li>Creates ProtoMsg from exports and notifies the EntityManager</li>
<li>ComponentNodes should still be defined in the Editor -&gt; Must link to the Manager in order to get them added.</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/tfelix/bestia-docs/commit/68d202cb717df62b0a04b4fc7a89419ebdbeab47" title='Last modified by Thomas Felix | June 7, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>June 7, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/tfelix/bestia-docs/edit/master/content//docs/client/architecture.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#client-architecture">Client Architecture</a>
      <ul>
        <li><a href="#entitymanager">EntityManager</a></li>
        <li><a href="#entitynode">EntityNode</a></li>
        <li><a href="#componentsetter">ComponentSetter</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












