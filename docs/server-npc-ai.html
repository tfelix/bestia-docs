<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Artificial Intelligence · Bestia Developer Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Finden einer KI Strategie&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Artificial Intelligence · Bestia Developer Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.bestia-game.net/index.html"/><meta property="og:description" content="&lt;p&gt;Finden einer KI Strategie&lt;/p&gt;
"/><meta property="og:image" content="https://docs.bestia-game.net/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.bestia-game.net/img/docusaurus.png"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossOrigin="anonymous"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-white-100.png" alt="Bestia Developer Documentation"/><h2 class="headerTitleWithLogo">Bestia Developer Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/about-manifest.html" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Server</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/about-bestia.html">About</a></li><li class="navListItem"><a class="navItem" href="/docs/about-manifest.html">The Manifest</a></li><li class="navListItem"><a class="navItem" href="/docs/about-mechanics.html">Game Mechanics</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Mechanics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/mech-statusvalues.html">Status Values</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-skills.html">Skills</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-resources.html">Resources</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-time.html">Bestia Time</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-cults.html">Cults</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-quests.html">Questes</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-trading.html">Trading</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-honor.html">Honor</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-exploration.html">Exploration</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-items.html">Items</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-inventory.html">Inventory</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-weather.html">Weather System</a></li><li class="navListItem"><a class="navItem" href="/docs/mech-spells.html">Spells and Attacks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Server</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/server-architecture.html">Server Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/server-worldcreation.html">World Generation</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/server-npc-ai.html">Artificial Intelligence</a></li><li class="navListItem"><a class="navItem" href="/docs/server-scripts.html">Server Scripts</a></li><li class="navListItem"><a class="navItem" href="/docs/server-battlesystem.html">Battlesystem</a></li><li class="navListItem"><a class="navItem" href="/docs/server-streaming.html">Server Streaming</a></li><li class="navListItem"><a class="navItem" href="/docs/server-routing.html">NPC Routing</a></li><li class="navListItem"><a class="navItem" href="/docs/server-queststories.html">Stories and Quests</a></li><li class="navListItem"><a class="navItem" href="/docs/server-lighting.html">Lighting</a></li><li class="navListItem"><a class="navItem" href="/docs/server-environment.html">Environment</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Client</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/client-architecture.html">Client Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/client-animation.html">Animations and Effects</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/api.html">Bestia API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Improvement Proposals</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/bip-about.html">Bestia Improvement Proposals (BIP)</a></li><li class="navListItem"><a class="navItem" href="/docs/bip-1.html">BIP 1 - ClientVars</a></li><li class="navListItem"><a class="navItem" href="/docs/bip-2.html">BIP 2 - Latency estimation</a></li><li class="navListItem"><a class="navItem" href="/docs/bip-3.html">BIP 3 - Debug mode</a></li><li class="navListItem"><a class="navItem" href="/docs/bip-4.html">BIP 4 - Dynamic Client UI</a></li><li class="navListItem"><a class="navItem" href="/docs/bip-5.html">BIP 5 - Translation Microservice</a></li><li class="navListItem"><a class="navItem" href="/docs/bip-6.html">BIP 6 - Conditional Component Sync</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Contributing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/contrib-design.html">Artwork and Design</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Appendix</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/misc-literature.html">Literature</a></li><li class="navListItem"><a class="navItem" href="/docs/misc-resources.html">Resources</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/tfelix/bestia-docs/edit/master/docs/server-npc-ai.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Artificial Intelligence</h1></header><article><div><span><p>Finden einer KI Strategie</p>
<ul>
<li><p>NPC</p>
<ul>
<li>Arbeiten
<ul>
<li>Holzhacken</li>
<li>Fischen</li>
<li>Feldarbeit</li>
<li>Haus bauen</li>
<li>Bibliothek</li>
</ul></li>
<li>Schlafen</li>
<li>Essen</li>
<li>Ausruhen</li>
<li>Reisen</li>
</ul></li>
<li><p>Mob</p>
<ul>
<li>Schlafen</li>
<li>Junge aufziehen</li>
<li>Nest bauen</li>
<li>Nahrungssuche</li>
</ul></li>
</ul>
<p>Entity</p>
<ul>
<li><p>Kann Schaden erleiden.</p></li>
<li><p>Besitzt eine Ausrichtung</p></li>
<li><p>Kann am KI Eventsystem teilhaben</p></li>
<li><p>Besitzt eine Position.</p></li>
<li><p>Besitzt eine visuelle Repräsentation (Sprite)</p></li>
<li><p>Kann eine KI Strategie erzeugen, basierend auf einem Script/Behaviour Tree</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="sinneswahrnehmung"></a><a href="#sinneswahrnehmung" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sinneswahrnehmung</h3>
<p>Es müssen sensorische Daten über die Umwelt an das KI System einer Bestia geleitet werden. Folgende externe Sinne werden simuliert:</p>
<ol>
<li><p>Sicht</p></li>
<li><p>Gehör</p></li>
<li><p>Gefühl: (Hitzeempfinden/Feuchtigkeit)</p></li>
<li><p>Mana (Wahrnehmen von Mana)</p></li>
</ol>
<p>Die Engine muss diese Sinnessimulationen generieren und Entitäten die sich für diese registriert haben über Veränderungen hinweisen, was den Entitäten wiederum ermöglicht eine Neubewertung ihrer KI Strategie vornehmen zu können. Dazu kommt ein umfassendes Set an internen Informationen wie Gesundheitszustand, Manavorrat, mögliche Attacken, Wissen über Geländebesonderheiten.</p>
<p>Da die Bewertung der KI Strategie von der Entity selbst vorgenommen wird, sollen die Regeln zur evaluation der Strategie dynamisch zur Laufzeit anpassbar sein. Lernende Agenten wären die folge. Die Entity benötigt nicht nur Schnittstellen zum Empfangen von KI Relevanten Events. Nachdem eine KI Strategie gefunden wurde, muss diese Strategie auch umgesetzt werden.</p>
<p>Im folgenden werden die Sinneswahrnehmungen der Entities im einzelnen beschrieben und möglichkeiten dargelegt diese effizient zu simulieren. Nicht alle Wahrnehmungen lassen sich ausreichend schnell physikalisch ausreichend gut simulieren.</p>
<h3><a class="anchor" aria-hidden="true" id="sicht"></a><a href="#sicht" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sicht</h3>
<p>Sicht erfolgt durch die Wahrnehmung von Licht. Es breitet sich ausreichend schnell aus, dass keine zeitliche Verzögerung betrachtet werden muss. Entities besitzen einen Blickwinkel von 60 Grad. Das Blickfeld kann aber durch Entitäten welche die Sicht blockieren oder einfachen Hindernissen versperrt sein. Lichtverhältnisse können die Wahrnehmung beeinflussen. So ist Nachts mit einer geringen Sichtweite zu rechnen. Die optimale Sichtweite sollte in etwa der Sichtbereich eines normalen Spielers betragen (das bedeutet (1950 px / 32 px) / 2 Tiles = 30 Tiles).</p>
<p>Verhalten von NPC</p>
<ul>
<li><p>Nachtaktiv (Lichtscheu)</p></li>
<li><p>Agressiv - Suchen aktiv Spieler und greifen diese an.</p></li>
<li><p>Passiv - Ignorieren Spieler soweit diese sie ebenfalls ignorieren. Scheu - Versuchen aktiv Begegnungen mit anderen Bestias oder Spielern aus dem Weg zu gehen.</p></li>
</ul>
<p>Ein angreifender Spieler oder Umweltbedingungen können das Verhalten ändern. Folgendes Verhalten soll für ein KI gesteuerten NPC möglich sein. Das komplexeste Verhalten kommt hier den NPCS zu. Mobs verhalten sich in der Regelprimitiver dennoch soll auch ihre Langzeitplanung und Verhalten neue Maßstäbe setzen. Die Zustände können durch das erreichen von Zielen aufgelöst werden. Um Zeit zu sparen soll gerade die Berechnung der Zielerfüllung ggf. Extern zumindest aber in mehreren Schritten erfolgen.</p>
<p>Verhaltensmuster der Mobs und NPCs</p>
<ul>
<li>Planen von Routen über mehrere Maps hinweg.</li>
<li>Festlegen von inneren Zielen</li>
<li>Wahrnehmung des Manaflusses</li>
</ul>
<h1><a class="anchor" aria-hidden="true" id="prasentation"></a><a href="#prasentation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Präsentation</h1>
<p>Dieser Abschnitt enthält Themenpunkte welche die konkrete visuelle Umsetzung und Präsentation des Spiels gegenüber einem Spieler umfassen. Dies können sowohl Style Richtlinien sein, als auch spiel mechanische Elemente um die Story zu transportieren.</p>
<h1><a class="anchor" aria-hidden="true" id="kunstliche-intelligenz"></a><a href="#kunstliche-intelligenz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Künstliche Intelligenz</h1>
<h2><a class="anchor" aria-hidden="true" id="grundlegende-techniken"></a><a href="#grundlegende-techniken" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Grundlegende Techniken</h2>
<ul>
<li><p>Wissendatenbank für die NPC über eine selbstoptimierende Ontologie (Semantische Wissensdatenbank).</p></li>
<li><p>Entscheidungsbaum</p></li>
<li><p>Auflösen von Informationen</p></li>
<li><p>Entitätsbasierte Wissensdatenbank (Erinnerung, Abfrage und Löschen der Informationen nach gewisser Zeit).</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="interaktion-mit-gegenstanden"></a><a href="#interaktion-mit-gegenstanden" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interaktion mit Gegenständen</h2>
<p>Um ein glaubhaftes Szenario der Welt zu zeichnen, müssen Entities in der Lage sein miteinander zu interagieren. Entities sind hier alle im Spiel befindlichen Gebäude, Gegenstände oder NPCs. Auch die KI muss in der Lage sein den Nutzen von Gegenständen zu begreifen und diese zu verwenden (Inventar von Entities muss vorhanden sein).</p>
<ul>
<li><p>KI Buch</p></li>
<li><p>SIMs KI</p></li>
<li><p>Gegenstände bieten Fähigkeiten an die man verwenden kann</p></li>
<li><p>Interaktion: Gegenstände bieten ein Signal Slot Verhältnis das man miteinander verknüpfen kann. Über diese Verknüpfung wird sichergestellt, dass auch räumlich voneinander getrennte Items miteinander interagieren können. (z.B. magische Artefakte die durch eine große, räumliche Distanz voneinander getrennt sind, oder Alarmanlagen in benachbarten Räumen).</p></li>
</ul>
<p>Gegenstands Verknüpfungen</p>
<p>Allen Gegenstand Entitäten (und somit eigentlich allen Entities) müssen in der Lage sein andere Gegenstände aufnehmen zu können. So lassen sich zum Beispiel Truhen, Frachtladungen etc. realisieren. Ob ein Gegenstand erfolgreich aufgenommen werden kann oder nicht muss dynamisch durch ein Script der aufnehmenden Entität entschieden werden. Hier kann ermittelt werden ob Voraussetzungen wie ausreichende Ladekapazität erfüllt sind.</p>
<p>Interaktion mit einem Gegenstand muss einen Fehlerstatus liefern ob die Interaktion erfolgte, oder ein Abbruch stattfindet (eine Interaktion nicht möglich war). Der Grund für diesen Abbruch muss angegeben werden können, damit dies für den Benutzer ersichtlich ist.</p>
<p>The artificial intelligence module should be implemented as generic library so it can be used by various kinds of games.
The framework must interact with the game engine in certain ways. It must have some notion of locality. The engine must be queried about environmental factors and the AI framework must be provided with a point object which it is able to save. Depending on this locations the game framework must be able to move agents to this points. Also the path planning and avoidance is highly dependent of the game and can not be part of the AI framework itself but must be provided by the game engine.
It is very likely that there are different kind of AIs needed for one single game. There are low intelligence agents like small (or dumb) enemies and very intelligent agents like NPCs or bosses.
Agents are described by an inner state which describes its next actions. The inner state might not always be a single, simple state (like a state machine) but can also inhibit a fuzzy behaviour. The inner state should be savable. The state transition should occur depending on the used state machine. Either there could be decision trees, variable controlled (fuzzy states) and many more. Either way there are transition function in place which take inputs from the environment and change directly the state or indirectly attributes which are used to ultimately calculate the current internal state.
The AI transition function must have a way to actively query into the world state of the engine to gather informations. This could be sounds, smell or visual information of their environment and so on. This information is used to either directly change its internal state via its transition functions or this information is filtered and saved into the agent's memory if a memory storage is provided. Environment information might also get delivered via events to the agent. Such information is usually not actively searched for. But a sudden explosion sound or enemy visual could lead to a change in behaviour and thus internal state. The agent must be able to re-evaluate its state upon the arrival of such events.
Smart management and storage of environment information is also a complete new innovation: the introduction of memory supported AI. This could mean a AI is capable of remembering the positions of players habitats, hunting grounds etc.. Depending upon the AI the entity should be able to communicate this information to other entities (if it is capable of communicating). Since we won't be able to correctly simulate the transfer of information via a language (might be the case for a later implementation) what we need is a way to configure the process of information exchange with other agents. It must be configurable which type of agents are able to exchange information, how close they must be to each other, do they need a special internal state until information is transferred and if the transfer starts how many information is shared how fast?
Agents should decide for themselves (usually depending on the internal state how often they want to reevaluate the world around them since this is a costly operation). They can send a suggestion to the outermost control system how often they want to tick (a sleeping agent usually needs less processing than a fighting entity). However the external system has to decide how many spare resources it has and if necessary give the AI less ticks then they might suggest). Since the Bestia system is event based and not ticked based in order to avoid unnecessary evaluations we might need a filter which will ignore certain incoming events to avoid costly operations.
Inner states might lead to desires. There must be a function for certain group of entities which maps the internal state to a current, certain goal. The strongest goal determines which actions are currently performed. The mapping of this Goal(State) function is highly agent and game dependent and thus must be provided by the user of the framework. There might be some default desires like eating, sleeping, idle etc..
Long term goal and behaviour planning
If the internal states suggest the agent is hungry which leads to a desire to eat we must have a way to plan how this desire can be fulfilled in a changing and complex external world. Therefore we need a mapping of goals to a list of actions. A action is a small subunit and should be able to be directly performed by the entity inside the game world. In order to perform correct goal into action mappings the agent needs some additional informations about actions like for example the estimated execution time or other cost factors so a cheapest path can be found of the current state to the goal. The actions are then saved into a queue and performed one after another by asking the game engine to perform this action in behalf of the agent. The agent must be able to ask the game if the action has been performed or if it's maybe unable to execute the action at all. If this is the case a revaluation of the goal to action list must be performed.
Some actions might be available all the time (drop an item) but some actions might only be possible in certain circumstances (mana is not empty, a certain tool lies on the ground). It is the job of the goal solver to assess all possible actions for a certain agent until the search for the best action solution towards the goal can be found.
Architecture
Agents
Agents contain a “Memory”. Inside this memory certain events are recorded and the agent can access this information for evaluation the next actions.
The memory's size must be adjustable to limit memory consumption.
Depending on the memory and the agent the memory is eventually dropped from the internal state or its weight reduces in decision making (a seen item might drop in relevance over time).
Agents act to fulfill “Desires”
Agents perform actions in order to fulfill the current active desire.
Agents can form groups and exchange “memory”.
Agents contain a state which describes internal “values” like e.g. hunger, thirst, health etc. based on this internal state and external circumstances desires are planned.
Receive environmental events like sound, smell or vision. Each change of world state (e.g. received event) can lead to a reevaluation of its internal state/goals/desires.</p>
<p>AgentState
Attributes can be added by the user.
Some state values are getting “better” the higher they are, some should be lowered. (e.g. hunger is bad if its value is high. But sleepiness is good when it goes low).
Some/all values have a decay function. Their values change over time.
Desires
Are fulfilled by a planned list of actions.
Desire have a priority. The desire to stay alive might be higher than to move from a to b.
Some desires are permanent some are temporary.
The possible actions are layed out to optimize against a agent dependent weight function. Some actors maybe want to save money, some might save time etc.</p>
<p>Questions
How are desires evaluated as “fullfilled”?</p>
<p>External System
Calls AI manager in more or less regular intervals to evaluate state changes.
External system provides interface for environmental access.
Perform Actions
Query informations about the state of certain actions
Estimate the cost of an action</p>
<p>AIGoalSolver
AIs must be able to solve complex operations in order to fulfill a desire.
Example: Desire:
Sleep Goal for animal: Find sleeping place → sleep
Sleep Goal for human: Go home → go to bed → sleep</p>
<p>Desire evaluation
For example the most important desire for most agents would be to stay alive. In order to do so they have a high importance to maximize the internal health state. The goal evaluator will pick one out of all possible actions, the action will alter the state and then the improvement will be evaluated. For example:</p>
<p>Agent
It has in its internal memory two locations A and B of possible food saved.
Near location A is also saved that there is an enemy 1 hour ago.
B is further away.</p>
<p>The agent gets very hungry and the desire to reduce the hunger is picked and placed as the current and thus most important one.
The goal solver now tries to solve this desire.
The solver looks in all possible actions for the entity:
Pick up food (there is no food around, thus this action is not legal)
Move (has a bit of a cost associated)
The solver picks move because the memory says there are two places with food.
CONSIDER THE ENEMY
The solver calculates how long it would take to perform the move action (time will increase our hunger) and pick the shortest way.
The main factors to drive AI decisions
How long does an action take to perform?
How much impact has the action? (measured by how much our internal state changes to the better or to the worst).
AI evolution
The most complex feature should be AI evolution. The AI should be able to evaluate its actions against a fitness function in order to start alternating or changing the transition functions. This could be either changing the whole decision tree or only changing some parameters in order to optimize behaviour. This evolution should be configurable. Some AI behaviour should simply not be able to change. Maybe some sort of evolutionary algorithm could be used to evaluate the AI actions. This would need two components: a fitness function evaluating the performance of the AI for certain criterions and a encoding scheme to encode the transition functions into a genetic code used for mutating after applying pressure.</p>
<p>AIPoint is used as notion of locality in the world. Points must be serializable so they can be saved with various locations.
Path planning and waypoint generation
There is a global waypoint and path network
Long term planning only available for agents which have learned about the way
Learning happens by: reading, questing, exploring the way of its own, drawing maps</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/server-worldcreation.html"><span class="arrow-prev">← </span><span>World Generation</span></a><a class="docs-next button" href="/docs/server-scripts.html"><span>Server Scripts</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#grundlegende-techniken">Grundlegende Techniken</a></li><li><a href="#interaktion-mit-gegenstanden">Interaktion mit Gegenständen</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo-white-100.png" alt="Bestia Developer Documentation" width="50" height="50"/></a><div><h5>Docs</h5><a href="/docs/about-bestia.html"><i class="fas fa-code"></i> Introduction</a><a href="/docs/server-architecture.html"><i class="fas fa-code"></i> Server Documentation</a><a href="/docs/client-architecture.html"><i class="fas fa-code"></i> Client Documentation</a></div><div><h5>Community</h5><a href="https://discord.gg/zZW8M2S"><i class="fab fa-discord"></i> Discord</a><a href="https://twitter.com/bestiagame" target="_blank" rel="noreferrer noopener"><i class="fab fa-twitter"></i> Twitter</a></div><div><h5>More</h5><a href="https://github.com/tfelix/bestia-docs"><i class="fab fa-github"></i> GitHub</a></div></section><section class="copyright">Copyright © 2016 -2019 Thomas Felix</section></footer></div></body></html>