<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>BIP 2 - Latency estimation · Bestia Game Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## BIP 2 - Latency estimation - Not implemented"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="BIP 2 - Latency estimation · Bestia Game Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.bestia-game.netindex.html"/><meta property="og:description" content="## BIP 2 - Latency estimation - Not implemented"/><meta property="og:image" content="https://docs.bestia-game.net/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.bestia-game.net/img/docusaurus.png"/><link rel="shortcut icon" href="img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href=""><img class="logo" src="img/docusaurus.svg" alt="Bestia Game Documentation"/><h2 class="headerTitleWithLogo">Bestia Game Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="docs/about-manifest.html" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Improvement Proposals</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul><li class="navListItem"><a class="navItem" href="docs/about-manifest.html">About This Game</a></li><li class="navListItem"><a class="navItem" href="docs/about-background.html">Background Story</a></li><li class="navListItem"><a class="navItem" href="docs/about-design.html">Artwork and Design</a></li><li class="navListItem"><a class="navItem" href="docs/about-lore.html">The Lore</a></li><li class="navListItem"><a class="navItem" href="docs/about-mechanics.html">Game Mechanics</a></li><li class="navListItem"><a class="navItem" href="docs/about-quests.html">Quests</a></li><li class="navListItem"><a class="navItem" href="docs/about-resources.html">Resources</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Mechanics</h3><ul><li class="navListItem"><a class="navItem" href="docs/mech-cartography.html">Cartography</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Server</h3><ul><li class="navListItem"><a class="navItem" href="docs/server-architecture.html">Server Architecture</a></li><li class="navListItem"><a class="navItem" href="docs/server-worldcreation.html">World Generation</a></li><li class="navListItem"><a class="navItem" href="docs/server-npc-ai.html">Artificial Intelligence</a></li><li class="navListItem"><a class="navItem" href="docs/server-scripts.html">Server Scripts</a></li><li class="navListItem"><a class="navItem" href="docs/server-battlesystem.html">Battlesystem</a></li><li class="navListItem"><a class="navItem" href="docs/server-streaming.html">Server Streaming</a></li><li class="navListItem"><a class="navItem" href="docs/server-items.html">Items</a></li><li class="navListItem"><a class="navItem" href="docs/server-routing.html">NPC Routing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Client</h3><ul><li class="navListItem"><a class="navItem" href="docs/client.html">Client</a></li><li class="navListItem"><a class="navItem" href="docs/client-animation.html">Animations and Effects</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul><li class="navListItem"><a class="navItem" href="docs/api.html">Bestia API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Improvement Proposals</h3><ul><li class="navListItem"><a class="navItem" href="docs/bip-about.html">Bestia Improvement Proposals (BIP)</a></li><li class="navListItem"><a class="navItem" href="docs/bip-1.html">BIP 1 - ClientVars</a></li><li class="navListItem navListItemActive"><a class="navItem" href="docs/bip-2.html">BIP 2 - Latency estimation</a></li><li class="navListItem"><a class="navItem" href="docs/bip-3.html">BIP 3 - Debug mode</a></li><li class="navListItem"><a class="navItem" href="docs/bip-4.html">BIP 4 - Dynamic Client UI</a></li><li class="navListItem"><a class="navItem" href="docs/bip-5.html">BIP 5 - Translation Microservice</a></li><li class="navListItem"><a class="navItem" href="docs/bip-6.html">BIP 6 - Conditional Component Sync</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Appendix</h3><ul><li class="navListItem"><a class="navItem" href="docs/misc-literature.html">Literature</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">BIP 2 - Latency estimation</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="bip-2-latency-estimation-not-implemented"></a><a href="#bip-2-latency-estimation-not-implemented" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BIP 2 - Latency estimation - Not implemented</h2>
<p>Um dem Spieler ein möglichst synchrones Spielerlebnis zu gewährleisten ist es wichtig die Latenz der Spieler untereinander zu kennen um so zum Beispiel Laufwege zu realisieren die zum gleichen Zeitpunkt enden. Dafür ist es wichtig die aktuelle Latenz des Spielers zum Server zu kennen. Zu diesem Zweck sendet der Server in regelmäßigen Zeitabständen einen PingRequest, mit einer ID und einem Timestamp, an den Client. Dieser antwortet darauf mit einem PingAnswer und dieser ID. Der Server kann dann zusammen mit der Ankunftszeit dieses Paketes die Latenz zu diesem Client abschätzen.</p>
<p>Diese Pakete werden alle 10 Sekunden gesendet und es wird ein Sliding Average der Ping Werte über 5 Messungen gebildet. Dabei wird der Median gebildet. Das Ergebnis nutzt man um alle Events zu korrigieren die eine gewisse Dauer in Anspruch nehmen. Dies sind vor allem Laufevents und Animationen über eine bestimmte Dauer (Zauber).</p>
<p>Zur Korrektur wird die ursprüngliche Animationsdauer um die Latenzzeit subtrahiert. All messages denoting a duration should also contain the latency estimation value.</p>
<p>Siehe: <a href="http://www.dynetisgames.com/2017/03/19/latency-estimation-phaser-quest/">http://www.dynetisgames.com/2017/03/19/latency-estimation-phaser-quest/</a></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="docs/bip-1.html">← BIP 1 - ClientVars</a><a class="docs-next button" href="docs/bip-3.html">BIP 3 - Debug mode →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#bip-2-latency-estimation-not-implemented">BIP 2 - Latency estimation - Not implemented</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="" class="nav-home"><img src="img/docusaurus.svg" alt="Bestia Game Documentation" width="66" height="58"/></a><div><h5>Docs</h5><a href="docs/en/about-manifest.html">Introduction</a><a href="docs/en/server.html">Server Documentation</a><a href="docs/en/client.html">Client Documentation</a></div><div><h5>Community</h5><a href="https://discord.gg/zZW8M2S">Project Chat</a><a href="https://twitter.com/bestiagame" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/tfelix/bestia-docs">GitHub</a></div></section><section class="copyright">Copyright © 2018 Thomas Felix</section></footer></div></body></html>