<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Scripting Das Skript-System in Bestia wird genutzt um flexible Programmausführung für verschiedenste Zwecke zu ermöglichen. Dazu gehören vor allem die Effekte von benutzten Items, Attacken, das Verhalten von Entities zu steuern.
The scripting language used is JavaScript. The scripting language is used to allow fast iteration and changes to the items. There is an API provided for the scripts in order to interact with the entity system of Bestia.
Script code must always be placed inside a main() function.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="Scripting Das Skript-System in Bestia wird genutzt um flexible Programmausführung für verschiedenste Zwecke zu ermöglichen. Dazu gehören vor allem die Effekte von benutzten Items, Attacken, das Verhalten von Entities zu steuern.
The scripting language used is JavaScript. The scripting language is used to allow fast iteration and changes to the items. There is an API provided for the scripts in order to interact with the entity system of Bestia.
Script code must always be placed inside a main() function." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://docs.bestia-game.net/docs/server/scripting/" />
<meta property="article:modified_time" content="2020-06-11T18:20:38+02:00" />
<title>Scripting | Bestia Game</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.8faf8c6f51f7bb1ff07807bc087f607f8071c4b0ce8b6737ad62995aa1337d4f.css" integrity="sha256-j6&#43;Mb1H3ux/weAe8CH9gf4BxxLDOi2c3rWKZWqEzfU8=">
<script defer src="/en.search.min.cb6d36c71c735988bba2f07c9b25e4a1b2620b080908375e72add139c6b5216d.js" integrity="sha256-y202xxxzWYi7ovB8myXkobJiCwgJCDdecq3ROca1IW0="></script>

<script defer src="/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js" integrity="sha256-dKi7B/C&#43;6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/bestia-logo.svg" alt="Logo" /><span>Bestia Game</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li>
  <a href="/docs/mechanics/"><strong>Game Design</strong></a>
<ul>
<li>
  <a href="/docs/mechanics/master/">Bestia Master</a></li>
<li>
  <a href="/docs/mechanics/bestia/">Bestias</a></li>
<li>
  <a href="/docs/mechanics/environment/">Environment</a></li>
<li>
  <a href="/docs/mechanics/items/">Items</a></li>
<li>
  <a href="/docs/mechanics/resources/">Resources</a></li>
<li>
  <a href="/docs/mechanics/skills/">Skills</a></li>
<li>
  <a href="/docs/mechanics/statusvalues/">Status Values</a></li>
</ul>
</li>
<li>
  <a href="/docs/client/"><strong>Client</strong></a>
<ul>
<li>
  <a href="/docs/client/architecture/">Architecture</a></li>
</ul>
</li>
<li>
  <a href="/docs/server/"><strong>Server</strong></a>
<ul>
<li>
  <a href="/docs/server/architecture/">Architecture</a></li>
<li>
  <a href="/docs/server/ai/">Artificial Intelligence</a></li>
<li>
  <a href="/docs/server/battle/">Battle</a></li>
<li>
  <a href="/docs/server/quests/">Quests</a></li>
<li>
  <a href="/docs/server/scripting/"class=active>Scripting</a></li>
<li>
  <a href="/docs/server/world-generation/">World Generation</a></li>
</ul>
</li>
<li>
  <a href="/docs/api/"><strong>REST API</strong></a></li>
<li>
  <a href="/docs/resources/"><strong>Development Resources</strong></a></li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Scripting</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#scripting">Scripting</a>
      <ul>
        <li><a href="#status-scripts--equip-scripts">Status Scripts / Equip Scripts</a>
          <ul>
            <li><a href="#status-scripts-functions">Status Scripts Functions</a></li>
          </ul>
        </li>
        <li><a href="#item-scripts">Item Scripts</a>
          <ul>
            <li><a href="#item-scripts-context-variables">Item Scripts Context Variables</a></li>
          </ul>
        </li>
        <li><a href="#attack-scripts">Attack Scripts</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="scripting">Scripting</h1>
<p>Das Skript-System in Bestia wird genutzt um flexible Programmausführung für verschiedenste Zwecke zu ermöglichen. Dazu gehören vor allem die Effekte von benutzten Items, Attacken, das Verhalten von Entities zu steuern.</p>
<p>The scripting language used is JavaScript. The scripting language is used to allow fast iteration and changes to the items. There is an API provided for the scripts in order to interact with the entity system of Bestia.</p>
<p>Script code must always be placed inside a <code>main()</code> function. They should also never have a inner state because they get stopped and periodically executed. In order to keep a variable scoped to the entity which executes the  The example script for the apple items looks like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">Bestia</span>.<span style="color:#a6e22e">findEntity</span>(<span style="color:#a6e22e">USER_ENTITY_ID</span>)
        .<span style="color:#a6e22e">condition</span>()
          .<span style="color:#a6e22e">addHp</span>(<span style="color:#ae81ff">10</span>)
}
</code></pre></div><p>The main entry point into the Bestia API is the <code>Bestia</code> object.</p>
<h2 id="status-scripts--equip-scripts">Status Scripts / Equip Scripts</h2>
<p>These scripts are called when a status effect is applied or removed (or if an equipment with a status effect is applied or removed)</p>
<h3 id="status-scripts-functions">Status Scripts Functions</h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>onApply()</td>
<td>Called when the effect is applied to an entity.</td>
</tr>
<tr>
<td>onRemove()</td>
<td>Called when the effect is removed from the entity.</td>
</tr>
<tr>
<td>onStatusApplied()</td>
<td>Called when another status effect is applied to the entity.</td>
</tr>
<tr>
<td>onStatusRemoved()</td>
<td>Called when another status effect is removed from the entity.</td>
</tr>
<tr>
<td>onTakeDamage()</td>
<td>Called when the entity which the script is attached to takes damage.</td>
</tr>
<tr>
<td>onAttack()</td>
<td>Called when the entity attacks another entity.</td>
</tr>
</tbody>
</table>
<h2 id="item-scripts">Item Scripts</h2>
<p>These are attached to items and are somehow similar to status effect scripts yet they share callbacks from items since equipments can lay down on the ground
and there is a chance they get attacked.</p>
<h3 id="item-scripts-context-variables">Item Scripts Context Variables</h3>
<table>
<thead>
<tr>
<th>Context Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bool onEquip()</td>
<td>Called when the item is equipped. When <code>false</code> returned the equipment is aborted. (Only for equipments)</td>
</tr>
<tr>
<td>bool onUnequip()</td>
<td>Called when the item is unequipped. When <code>false</code> returned the unequipment is aborted. (Only for equipments)</td>
</tr>
<tr>
<td>onDrop()</td>
<td></td>
</tr>
<tr>
<td>onPickup()</td>
<td></td>
</tr>
<tr>
<td>onTakeDamage()</td>
<td></td>
</tr>
<tr>
<td>onUse()</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="attack-scripts">Attack Scripts</h2>
<p>The attack scripts are a bit more complex. They are also simply called upon usage of an attack. Depending on the definition of the attack this might be the only place to perform certain damage calculation for example.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/tfelix/bestia-docs/commit/c778730ba205b6751fa640e20ec30d69374e875c" title='Last modified by Thomas Felix | June 11, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>June 11, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/tfelix/bestia-docs/edit/master/content//docs/server/scripting.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#scripting">Scripting</a>
      <ul>
        <li><a href="#status-scripts--equip-scripts">Status Scripts / Equip Scripts</a>
          <ul>
            <li><a href="#status-scripts-functions">Status Scripts Functions</a></li>
          </ul>
        </li>
        <li><a href="#item-scripts">Item Scripts</a>
          <ul>
            <li><a href="#item-scripts-context-variables">Item Scripts Context Variables</a></li>
          </ul>
        </li>
        <li><a href="#attack-scripts">Attack Scripts</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












