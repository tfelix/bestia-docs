<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta name="generator" content="Hugo 0.70.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Environment Bestia uses a sophisticated temperature and environment system to drive weather simulation and the effects on the player&rsquo;s environment.
These simulations should be based on certain basic values that are determined location-dependent, but can be changed by interaction with the players. Also, natural changes in the world (alternating seasons) should lead to an adjustment of these values. Due to the changes of the environmental values the environment areas have to be adapted to the world itself.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Environment" />
<meta property="og:description" content="Environment Bestia uses a sophisticated temperature and environment system to drive weather simulation and the effects on the player&rsquo;s environment.
These simulations should be based on certain basic values that are determined location-dependent, but can be changed by interaction with the players. Also, natural changes in the world (alternating seasons) should lead to an adjustment of these values. Due to the changes of the environmental values the environment areas have to be adapted to the world itself." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://docs.bestia-game.net/docs/mechanics/environment/" />
<meta property="article:modified_time" content="2021-01-20T01:57:21+01:00" />
<title>Environment | Bestia Game</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.4d34b11806294f51ee5852bec21808d962f1c7298e53d4f042251e021920a3f2.css" integrity="sha256-TTSxGAYpT1HuWFK&#43;whgI2WLxxymOU9TwQiUeAhkgo/I=">
<script defer src="/en.search.min.4524f03d414e2031230cad308e15ee32cb2102ffe5f472d68dc5b03847cd7cd0.js" integrity="sha256-RSTwPUFOIDEjDK0wjhXuMsshAv/l9HLWjcWwOEfNfNA="></script>

<script defer src="/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js" integrity="sha256-dKi7B/C&#43;6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/logo-white-header.png" alt="Logo" /></a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li>
  <a href="/docs/mechanics/"><strong>Game Design</strong></a>
<ul>
<li>
  <a href="/docs/mechanics/mechanics/">Game Mechanics</a></li>
<li>
  <a href="/docs/mechanics/master/">Bestia Master</a></li>
<li>
  <a href="/docs/mechanics/bestia/">Bestias</a></li>
<li>
  <a href="/docs/mechanics/environment/"class=active>Environment</a></li>
<li>
  <a href="/docs/mechanics/items/">Items</a></li>
<li>
  <a href="/docs/mechanics/resources/">Resources</a></li>
<li>
  <a href="/docs/mechanics/skills/">Skills</a></li>
<li>
  <a href="/docs/mechanics/statusvalues/">Status Values</a></li>
</ul>
</li>
<li>
  <a href="/docs/client/"><strong>Client</strong></a></li>
<li>
  <a href="/docs/server/"><strong>Server</strong></a>
<ul>
<li>
  <a href="/docs/server/architecture/">Architecture</a></li>
<li>
  <a href="/docs/server/ai/">Artificial Intelligence</a></li>
<li>
  <a href="/docs/server/battle/">Battle</a></li>
<li>
  <a href="/docs/server/quests/">Quests</a></li>
<li>
  <a href="/docs/server/scripting/">Scripting</a></li>
<li>
  <a href="/docs/server/world-generation/">World Generation</a></li>
</ul>
</li>
<li>
  <a href="/docs/api/"><strong>REST API</strong></a></li>
<li>
  <a href="/docs/resources/"><strong>Development Resources</strong></a></li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Environment</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#environment">Environment</a>
      <ul>
        <li><a href="#temperature">Temperature</a></li>
        <li><a href="#weather">Weather</a>
          <ul>
            <li><a href="#rain">Rain</a></li>
            <li><a href="#fog">Fog</a></li>
            <li><a href="#night">Night</a></li>
          </ul>
        </li>
        <li><a href="#bestia-time">Bestia-Time</a></li>
        <li><a href="#the-threat">The Threat</a>
          <ul>
            <li><a href="#rift-event">Rift Event</a></li>
            <li><a href="#mana-crystal-infestation">Mana Crystal Infestation</a></li>
          </ul>
        </li>
        <li><a href="#world-exploration">World Exploration</a>
          <ul>
            <li><a href="#cartography">Cartography</a></li>
            <li><a href="#explored-worldmap">Explored Worldmap</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="environment">Environment</h1>
<p>Bestia uses a sophisticated temperature and environment system to drive weather simulation and the effects on the player&rsquo;s environment.</p>
<p>These simulations should be based on certain basic values that are determined location-dependent, but can be changed by interaction with the players. Also, natural changes in the world (alternating seasons) should lead to an adjustment of these values. Due to the changes of the environmental values the environment areas have to be adapted to the world itself. These have to be adjusted anyway if they should change due to other local effects like fire or mining. The client must be informed about adjusted environment areas.</p>
<blockquote>
<p>Bestia Master enter the current world from another, not further mentioned dimension. During each incarnation
a name of this world is generated and in each cycle all Bestia Master entering the game will have this world name
persisted in their account data to keep a record.</p>
</blockquote>
<h2 id="temperature">Temperature</h2>
<p>Each Bestia has a certain sweet spot of tolerable temperature. There are several kinds of base temperature ranges in which Bestia thrive:</p>
<table>
<thead>
<tr>
<th>Temperature Kind</th>
<th align="right">Base Temperature Range [Â°C]</th>
</tr>
</thead>
<tbody>
<tr>
<td>Low Temperature</td>
<td align="right">-20 - 15</td>
</tr>
<tr>
<td>Medium Temperature</td>
<td align="right">10 - 30</td>
</tr>
<tr>
<td>High Temperature</td>
<td align="right">25 - 45</td>
</tr>
</tbody>
</table>
<p><code>Vitality</code> and <code>Willpower</code> increases resistance against the temperatures. Specialized equipment or status effects can also
affect temperature resistance.</p>
<p>The formular is as follows:</p>

<link rel="stylesheet" href="/katex/katex.min.css" />
<script defer src="/katex/katex.min.js"></script>
<script defer src="/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script><span>
  \[   T_{tolerable} &#43;= T_{base} &#43; \sqrt{\text{VIT}} / 2 \cdot \sqrt{\text{WILL}} / 4\]
</span>

<p>For items and structures these calculation is a bit different. Usually these items have some threshold above or under which they will start to malfunction (or perhaps even catch fire!).</p>
<h2 id="weather">Weather</h2>
<p>The weather system in Bestia plays a crucial role. It also affects the visibility and also the behavior of the NPC and
mobs. Depending on the weather the NPCs and the player character will need a improved shelter or equipment to avoid a loss of stamina.</p>
<p>The weather influences also the temperature which will in turn decide if and how much stamina a entity regenerates or loses.</p>
<p>The weather will also play a role in which crops and plants grow. If the player decided to plant salad in the desert this won&rsquo;t work quite well.</p>
<h3 id="rain">Rain</h3>
<p>A in strength controllable rain effect should overlay the entire viewport. The rain blowing direction should correlate
with the wind direction (which will be more or less random). During rain the ground will show a wet effect and view distance is
reduced. It also reduces the effectiveness of fires and might extingush them. Fire attacks will lose certain strengths in a very wet environment (like burning effects won&rsquo;t last very long).</p>
<h3 id="fog">Fog</h3>
<p>Clouds of fog will move slowly over the map. And the sight of the AI entities is reduced. Its will also get harder for a player to see.</p>
<h3 id="night">Night</h3>
<p>During night time the player will need light sources in order to improve
the visibility of enemies or terrain. There will be certain items (e.g. torches, candles etc.) as well as spells to
make light.</p>
<h2 id="bestia-time">Bestia-Time</h2>
<p>The time in the Bestia game is faster than the real-world time. When we refer to the faster in-game time we will call it <strong>Bestia time</strong>, if we refer to the normal time we call it <strong>real-time</strong>.</p>
<p>Changing seasons should lead to an impression of the changeability of the world. You have to adapt to a periodically
changing environment. Things that work in summer may not be possible in winter. But so that the players don&rsquo;t have
to wait for a real year, time in Bestia flies faster.</p>
<p>The Bestia-Time starts at the creation of the Bestia world. It is basically three times faster then the usual time.
This means that the normal bestia day has 8 hours in real-time.</p>
<p>This means that the bestia month has 10 days in real-time and a bestia year is monthsth in real time.</p>
<ul>
<li>Bestia year: 4 months</li>
<li>Bestia season: summer, winter, fall, spring: each 1 month</li>
<li>Bestia day: 8 hours</li>
</ul>
<p>This allows the player to see multiple day-night cycles on the same day while allowing him to play for a considerable
time so he can actually do something meaningful until the sun rises again.</p>
<blockquote>
<p>If it turns out that the night period is too annoying for the players because
of the limited amount of gameplay then the night might get shortened.</p>
</blockquote>
<p>This calculation results in the following example timespans:</p>
<table>
<thead>
<tr>
<th>Bestia Time</th>
<th>Real-Time</th>
</tr>
</thead>
<tbody>
<tr>
<td>3 h</td>
<td>1 h</td>
</tr>
<tr>
<td>12 d</td>
<td>4 d</td>
</tr>
<tr>
<td>1 yr</td>
<td>4 mon</td>
</tr>
</tbody>
</table>
<h2 id="the-threat">The Threat</h2>
<p>After a random period of time (at least 6 months in 
  <a href="/#ingame-time">real time</a>), a threats starts to appear in every world incarnation. These can be threats from particularly strong Bestia, which cause great destruction, but also magical elements or natural disasters such as meteorites. Under certain conditions, this event can also contribute to the destruction of the world. If the total destruction is caused by the event itself then none of the cults will benefit from it. So it is in the interest of the cult players to avert this threat together.</p>




<div class="book-tabs"><input type="radio" class="toggle" name="tabs-Thread Appearence Delay" id="tabs-Thread Appearence Delay-0" checked="checked" />
  <label for="tabs-Thread Appearence Delay-0">Population &lt; 1k</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">delay = <span style="color:#ae81ff">9</span> + rand() * <span style="color:#ae81ff">1.5</span>;
</code></pre></div></div><input type="radio" class="toggle" name="tabs-Thread Appearence Delay" id="tabs-Thread Appearence Delay-1"  />
  <label for="tabs-Thread Appearence Delay-1">Population &lt; 5k</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">delay = <span style="color:#ae81ff">9</span> + rand() * <span style="color:#ae81ff">2.5</span>;
</code></pre></div></div><input type="radio" class="toggle" name="tabs-Thread Appearence Delay" id="tabs-Thread Appearence Delay-2"  />
  <label for="tabs-Thread Appearence Delay-2">Population &gt; 5k</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">delay = <span style="color:#ae81ff">9</span> + rand() * <span style="color:#ae81ff">4</span>;
</code></pre></div></div></div>

<p>A threat does not necessarily have to be perceived directly. A meteor, or severe flooding, can take place far away, changing parts of the world without much of the player community noticing but permanently shaping and changing the world. A subtle fear of this event creeping up should always haunt players.</p>
<p>Not described events:</p>
<ul>
<li>Vulcanic Activity</li>
<li>Tsunami / Permanent Flooding</li>
<li>Metorite Impact</li>
<li>Iceage</li>
<li>The Great Drought</li>
<li>Mana Burn</li>
<li>The Destroyer (a Bestia targeting player cities)</li>
</ul>
<h3 id="rift-event">Rift Event</h3>
<p>Starting in areas with big mana presence a first rift opens up. These are detactable with Spells which reveal big mana concentrations and also can be detected by special rift detection spells or devices. This should allow the player to aproximatly pin point the rift origin.</p>
<h3 id="mana-crystal-infestation">Mana Crystal Infestation</h3>
<p>In areas with a very high mana concentration a Mana Infestation can manifest. It increases mana generation in the area and depending on the concentation is will spawn new crystals next to it. The crystals damage every creature or structure in its vicinity, eventually consuming more and more of the planet destroying everything.</p>
<p>The crystals itself can be destroyed. Everything which drains mana or banishes it is helpful to reduce the crystals.</p>
<h2 id="world-exploration">World Exploration</h2>
<p>A large part of the game world generates automatically. There should be a motivation for players exploring the world. New areas can be mapped and unique resources can be discovered and explored. In general, players should have their own branch about the secrets of the world to discover new items and how they are created. The entire world must gradually be explored and mapped by players. Players will be able to view this map online and see the overall progress of the exploration.</p>
<p>Having a workable map has multiple use-cases:</p>
<ol>
<li>Most spells can be targeted only on a map with uncovered areas</li>
<li>AI assisted walking of controlled player Bestia only works in charted territory</li>
<li>Announcments of public events works and is synced via maps owned by the players</li>
<li>Only inside explored areas Geologists can search for mineral resources</li>
</ol>
<p>There are a few assumptions regarding maps:</p>
<ul>
<li>Every player should be able to create a world map in-game</li>
<li>Player with cartographer skill should be able to combine multiple maps into single ones combining the explored area</li>
<li>Highly skilled cartoprpher can generate new magic maps to inform about possible events (exchange information with friends via markers, or display resource sources).</li>
</ul>
<p>Regular player might try to create copies but this will be very hard without a cartography skill and most likly fail.</p>
<p>For generating the visual of the player map we use the algorithm described in 
  <a href="http://mewo2.com/notes/terrain/">Terrain Map Generation</a>
and it&rsquo;s respective 
  <a href="https://github.com/mewo2/terrain">Github repository</a></p>
<h3 id="cartography">Cartography</h3>
<p>In order to explore a area of the map the player has to perform manual tasks. He can choose how wide the area to measure should be. Bigger areas will tend to be harder to explore. The further away the player is from already explored land the harder the successful performing of the skill will be.</p>
<p>The player must perform a mini-game to explore the area. He might use devices which help to explore bigger areas.</p>
<p>If the skill fails the player will need to wait for a certain amount of time in order to perform the skill again in the vicinity. The cooldown is reduced for adjacent areas.</p>
<p>There are three difficulties which describe the range of the discovery and also give a base probability:</p>
<table>
<thead>
<tr>
<th>Range</th>
<th>Difficulty</th>
</tr>
</thead>
<tbody>
<tr>
<td>1km</td>
<td>30</td>
</tr>
<tr>
<td>3km</td>
<td>50</td>
</tr>
<tr>
<td>5km</td>
<td>80</td>
</tr>
</tbody>
</table>
<p>The following aplies:</p>
<ul>
<li>For every km from explored land the difficulty increases by <code>10</code></li>
<li>For 1% of magic energy on the area difficulty increases by <code>0.5</code></li>
<li>Every level of <code>Cartographer</code> reduces difficulty by <code>10</code>.</li>
</ul>
<ol>
<li>Upon using the skill a difficulty <code>d</code> is determined, depending on the distance to the next already cartographed area and the area wished to be explored.</li>
<li>There are 3-5 locations <code>l</code> spawned around the player within a radius of 300 to 800 meters around the player (depending on the difficulty). He must reach them within a timelimit <code>t</code>.</li>
<li>When near one of such a location (5m) the player is given a moving compass graphic. The speed of moving needle and the area to hit via button press is calculated based on <code>d</code>.</li>
</ol>
<h3 id="explored-worldmap">Explored Worldmap</h3>
<p>Explored areas are squared to save them easier. The total explored map is saved on the server in a Runlength Encoded datastructure. Smallest resolution is 100m.
A base terrain map is generated an player map contains a sub-section of this map and every map holds its own data so it only displays what
was explored by this map instance. The map is generated on the server like so:</p>
<ol>
<li>Detect the area the player map depicts</li>
<li>Decode the RLE discovered area of it</li>
<li>Use the complete map of the server to return the visible data, delete the rest</li>
<li>Send display map data to the client</li>
</ol>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/tfelix/bestia-docs/commit/135da9bf975c94a0cabd3d6113a515b2a0fdb492" title='Last modified by Thomas Felix | January 20, 2021' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>January 20, 2021</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/tfelix/bestia-docs/edit/master/content//docs/mechanics/environment.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#environment">Environment</a>
      <ul>
        <li><a href="#temperature">Temperature</a></li>
        <li><a href="#weather">Weather</a>
          <ul>
            <li><a href="#rain">Rain</a></li>
            <li><a href="#fog">Fog</a></li>
            <li><a href="#night">Night</a></li>
          </ul>
        </li>
        <li><a href="#bestia-time">Bestia-Time</a></li>
        <li><a href="#the-threat">The Threat</a>
          <ul>
            <li><a href="#rift-event">Rift Event</a></li>
            <li><a href="#mana-crystal-infestation">Mana Crystal Infestation</a></li>
          </ul>
        </li>
        <li><a href="#world-exploration">World Exploration</a>
          <ul>
            <li><a href="#cartography">Cartography</a></li>
            <li><a href="#explored-worldmap">Explored Worldmap</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












